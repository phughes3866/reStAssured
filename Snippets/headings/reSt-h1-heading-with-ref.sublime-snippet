<snippet>
    <content><![CDATA[
.. _${1/([[:upper:]])|([[:space:]])|([[:punct:]])/(?1:(\l$1))(?2:_)(?3:)/g}:

${1/./*/g}
${1}
${1/./*/g}

$0
]]></content>
    <tabTrigger>h1</tabTrigger>
    <scope>text.restructuredtext</scope>
    <description>heading1 with ref</description>
</snippet>